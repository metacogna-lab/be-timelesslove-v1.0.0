# ============================================
# Timeless Love Backend - Environment Variables
# ============================================
# Copy this file to .env.local for development or .env.production for production
# DO NOT commit files with real secrets!

# ============================================
# Environment
# ============================================
ENVIRONMENT=development
DEBUG=true
API_VERSION=v1

# Data directory path for persistent storage
# Development (local): ./data
# Production (server): /data/timeless-love-data
DATA_DIRECTORY_PATH=./data

# ============================================
# Supabase Configuration (REQUIRED)
# ============================================
# Get these from: Supabase Dashboard > Project Settings > API
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here
SUPABASE_JWT_SECRET=your-jwt-secret-here

# ============================================
# Supabase Database (for LangGraph checkpointing)
# ============================================
# Get from: Supabase Dashboard > Project Settings > Database > Connection Pooling
# Use Transaction mode (Port 6543) for optimal LangGraph performance
SUPABASE_DB_URL=postgresql://postgres.{project-ref}:{password}@aws-0-{region}.pooler.supabase.com:6543/postgres
SUPABASE_DB_PASSWORD=your-database-password
SUPABASE_DB_REGION=us-east-1
SUPABASE_ACCESS_TOKEN=

# ============================================
# JWT Configuration (REQUIRED)
# ============================================
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=generate-with-openssl-rand-hex-32-minimum-32-bytes
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================
# CORS Configuration
# ============================================
# Comma-separated list of allowed origins
# Development:
CORS_ORIGINS=http://localhost:5173,http://localhost:3000
# Production (update to your domains):
# CORS_ORIGINS=https://timelesslove.ai,https://www.timelesslove.ai,https://api.timelesslove.ai

# ============================================
# Storage Configuration
# ============================================
STORAGE_BUCKET_NAME=memories

# ============================================
# Media Processing
# ============================================
MEDIA_MAX_FILE_SIZE_MB=50
MEDIA_MAX_MEMORY_SIZE_MB=200
MEDIA_THUMBNAIL_SIZE=400
MEDIA_UPLOAD_URL_EXPIRES_SECONDS=300
MEDIA_ACCESS_URL_EXPIRES_SECONDS=3600

# ============================================
# Cloudflare Tunnel (Optional)
# ============================================
CLOUDFLARE_TUNNEL_TOKEN=
CLOUDFLARE_TUNNEL_ID=

# ============================================
# AI/Intelligence Layer Configuration
# ============================================
# Provider selection: openai, anthropic, gemini
# Use INTELLIGENCE_PRIMARY_PROVIDER for main tasks
# Use INTELLIGENCE_FALLBACK_PROVIDER for backup/cost optimization

INTELLIGENCE_PRIMARY_PROVIDER=openai
INTELLIGENCE_FALLBACK_PROVIDER=gemini

# ============================================
# OpenAI Configuration
# ============================================
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_ORG_ID=

# Model selection by complexity:
# - simple: Fast, cheap tasks (tag extraction, classification)
# - standard: Balanced tasks (summarization, analysis)
# - complex: High-quality reasoning (narrative generation, insights)
OPENAI_MODEL_SIMPLE=gpt-4o-mini
OPENAI_MODEL_STANDARD=gpt-4o
OPENAI_MODEL_COMPLEX=gpt-4o

# Embedding model for vector search
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_EMBEDDING_DIMENSIONS=1536

# ============================================
# Anthropic Configuration
# ============================================
# Get from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here

# Model selection by complexity:
ANTHROPIC_MODEL_SIMPLE=claude-3-5-haiku-latest
ANTHROPIC_MODEL_STANDARD=claude-sonnet-4-20250514
ANTHROPIC_MODEL_COMPLEX=claude-opus-4-20250514

# ============================================
# Google Gemini Configuration
# ============================================
# Get from: https://aistudio.google.com/apikey
GEMINI_API_KEY=your-gemini-api-key-here

# Model selection by complexity:
GEMINI_MODEL_SIMPLE=gemini-2.0-flash-lite
GEMINI_MODEL_STANDARD=gemini-2.0-flash
GEMINI_MODEL_COMPLEX=gemini-2.5-pro-preview-06-05

# Embedding model
GEMINI_EMBEDDING_MODEL=text-embedding-004

# ============================================
# Intelligence Processing Configuration
# ============================================
# Redis for short-term memory cache (optional but recommended)
INTELLIGENCE_REDIS_URL=redis://localhost:6379
INTELLIGENCE_CACHE_ENABLED=true
INTELLIGENCE_CACHE_TTL_HOURS=24

# Async job processing
INTELLIGENCE_ASYNC_PROCESSING=true
INTELLIGENCE_JOB_QUEUE_SIZE=100
INTELLIGENCE_MAX_CONCURRENT_JOBS=5

# Rate limiting (requests per minute per provider)
INTELLIGENCE_RATE_LIMIT_OPENAI=60
INTELLIGENCE_RATE_LIMIT_ANTHROPIC=50
INTELLIGENCE_RATE_LIMIT_GEMINI=60

# Cost optimization
INTELLIGENCE_MAX_TOKENS_SIMPLE=500
INTELLIGENCE_MAX_TOKENS_STANDARD=2000
INTELLIGENCE_MAX_TOKENS_COMPLEX=4000

# ============================================
# Intelligence Feature Flags
# ============================================
INTELLIGENCE_TAG_EXTRACTION_ENABLED=true
INTELLIGENCE_FEED_RANKING_ENABLED=true
INTELLIGENCE_MEDIA_INTELLIGENCE_ENABLED=true
INTELLIGENCE_CONTENT_MODERATION_ENABLED=true
INTELLIGENCE_FAMILY_INSIGHTS_ENABLED=true

# ============================================
# Vector Search Configuration
# ============================================
# pgvector index name for similarity search
VECTOR_INDEX=timelesslove-embeddings

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=INFO
LOG_FORMAT=json
